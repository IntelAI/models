name: Unit Test
on: pull_request
jobs:
  unit-test:
    container:
      image: python:3.8
      credentials:
         username: ${{ secrets.DOCKER_USER }}
         password: ${{ secrets.DOCKER_TOKEN }}
    runs-on: [ gasp ]
    steps:
      - uses: actions/checkout@v3
      - name: Install OS Packages
        run: |
          apt-get update
          apt-get install --no-install-recommends --fix-missing -y \
            make
      - name: Install Test Dependencies
        run: python -m pip install -r requirements-test.txt
      - name: Run Style Test using Make
        run: make lint
      - name: Run Unit Test
        run: make unit_test
